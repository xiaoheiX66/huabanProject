<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../js/cookie.js"></script>
    <!-- <script src="./js/jqueryd.js"></script> -->
    <link rel="stylesheet" href="//at.alicdn.com/t/font_2998256_kmrez03r6zs.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_2970361_1yzf5hdowop.css">
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script src="../jquery/jquery.min.js"></script>
    <link rel="stylesheet" href="../css/headsubcss.css">
    <link rel="stylesheet" href="../css/designers.css">
    <title>花瓣</title>
</head>

<body>
    <div class="box">
        <div class="headss">
            <section>
                <div>
                    <p style="font-style: normal;height: 70px;width: 220px;" class="huabanImg">
                        <img src="../img/logos.png" alt="" width="100%" height="100%">
                    </p>
                    <p>首页</p>
                    <p style="cursor: pointer;" class="designServer">
                        <a style="display: inline;text-decoration: none;color: black;" href="./list.html">
                        设计服务</a>&nbsp;<i class="iconfont icon-xiajiantou1"></i>
                    </p>
                    <p class="exportCont">我是nendie</p>
                    <p class="designErs">
                        <a style="display: inline;text-decoration: none;color: black;" href="./designErs.html">
                        设计师</a></p>
                </div>
            </section>
            <section>
                <div style="position: relative;">
                    <div class="newParentTop" style="display: flex;">
                        <button class="comeBtnback">登录</button>
                        <button class="registrback">退出</button>
                    </div>
                </div>
            </section>
        </div>
        <div class="nav" style="height: 116px;background-color: #ffffff;">
            <div class="nav1" style="border-bottom: 0px;">
                <div class="content">
                    <div class="label" style="font-size: 18px;padding: 0px 5px;">分类:</div>
                    <nav class="nav_list" style="height: 100px;">
                        <!-- <a class="item" href="/services/">全部</a> -->
                        <!-- <a class="item item2">全部</a> -->
                    </nav>
                </div>
            </div>
            <div class="inviteSort">推荐排序&nbsp;<i class="iconfont icon-yuyinjiantou" style="font-size: 22px;"></i></div>
            <div class="listUser">
                <!-- list孩子们 -->
            </div>
          
        <div class="box3">
            <div class="aboutnet">
                <h1>花瓣美思，花瓣网旗下网站</h1>
                <div class="netcont">
                    <section>
                        <dl>
                            <dt>花瓣美思</dt>
                            <dd>关于美思</dd>
                            <dd>雇主问题</dd>
                            <dd>设计师问题</dd>
                            <dd>使用帮助</dd>
                        </dl>
                    </section>
                    <section>
                        <dl>
                            <dt>平台战略合作伙伴</dt>
                            <dd>中华世纪坛创意新媒体联盟</dd>
                            <dd>腾讯风铃</dd>
                            <dd>ixdc</dd>
                            <dd>红星奖</dd>

                        </dl>
                    </section>
                    <section>
                        <dl>
                            <dt>联系与合作</dt>
                            <dd>联系我们</dd>
                            <dd>联系客服</dd>
                            <dd>微博&nbsp;@花瓣网</dd>
                            <dd class="wx">微信</dd>
                            <img src="../img/erweia.jpg" alt="">
                        </dl>
                    </section>
                    <section>
                        <dl>
                            <dt>移动客户端</dt>
                            <dd>iOS</dd>
                            <dd>Android</dd>
                        </dl>
                    </section>
                </div>
            </div>
            <div class="banquan">
                <p>Copyright©&nbsp;Huaban.com&nbsp;2016&nbsp;|&nbsp;浙B2-20110282&nbsp;浙ICP备05049240</p>
            </div>
        </div>
  </div>
    <script src="../js/tempMiddle.js"></script>
        <script>
            let nav_list = document.querySelector(".nav_list")

            $(".designServer").click(function () {
                window.location.href = "./list.html"
            })
            // 分类子类渲染
            getData()

            function getData() {
                $.ajax({
                    url: "../designer.json"
                }).then((res) => {
                    let res1 = res;
                    let str = "";
                    res1.map((item, index) => {
                        return str += `
                    <a class="item" style="cursor:pointer;" href="#" index=${index}  data=${item.category}>${item.name}</a>
                    `
                    }).join("")
                    $(".nav_list").html(str);
                })

            }
            // 全部与分类渲染
            $(".nav_list").click(function (e) {
                if (e.target.className == "item") {
                    let active = nav_list.querySelector(".active")
                active && active.classList.remove("active")
               e.target.classList.add("active")
                    let category = e.target.getAttribute("data")
                    if (!category) {
                        renderAll()
                    };

                    $.ajax({
                        url: `https://muse.huaban.com/api/v1/users/?category=${category}`,
                        success: function (res) {
                            console.log("userRes", res);
                            let str = "";
                            res.map((item, index) => {
                                return str += `
                            <section>
                        <div>
                             <div class="leftInfos">
                             <dl>
                            <dd>
                                <p style="width: 200px;height: 30px;line-height: 35px;">${item.username}</p>
                            </dd>
                            <dd>
                                <p>${item.service_count}个设计服务</p>
                                ${item.extra.rating?`<p>评价:&nbsp;&nbsp;<i style="color:red">${renderXing(item.extra.rating)}</i></p>`:""}
                                
                            </dd>
                            <dd style="font-weight:bold">
                               ${item.category.map((value)=>{
                                   return `<i>${info[value]}</i>`;
                               }).join("")}
                            </dd>
                        </dl>
                         </div>
                         
                    <div class="rightInfos"><a style="width:100%;height:100%" href="./designDetail.html?id=${item.user_id}">
                        <img src="//hbimg.huabanimg.com/${item.avatar.key}_/both/140x140" /></a>
                        </div>
                     </div>
                <div>
                    <p>${item.desc}</p>
                </div>
            </section>
                            `
                            }).join("")
                            $(".listUser").html(str);
                        },
                        error: function (err) {
                            console.log(err);
                        }
                    })
                }
            
            })
            
            // 默认请求排列

            renderAll()

            function renderAll() {
                $.ajax({
                    url: "https://muse.huaban.com/api/v1/users/",
                    success: function (res) {
                        console.log("resRenderAll",res);
                        let str = "";
                        res.map((item, index) => {
                            return str += `
                            <section>
                <div>
                    <div class="leftInfos">
                        <dl>
                            <dd>
                                <p style="width: 200px;height: 30px;line-height: 35px;">${item.username}</p>
                            </dd>
                            <dd>
                                <p>${item.service_count}个设计服务</p>
                                ${item.extra.rating?`<p>评价:&nbsp;&nbsp;<i style="color:red">${renderXing(item.extra.rating)}</i></p>`:""}
                            </dd>
                            <dd style="font-weight:bold">
                                ${item.category.map((value)=>{
                                   return `<i>${info[value]}</i>`;
                               }).join("")}
                            </dd>
                        </dl>
                    </div> 
                    <div class="rightInfos"><a style="width:100%;height:100%" href="./designDetail.html?id=${item.user_id}">
                        <img src="//hbimg.huabanimg.com/${item.avatar.key}_/both/140x140" /></a>
                        </div>
                </div>
                <div>
                    <p>${item.desc}</p>
                </div>
            </section>
                            `
                        }).join("")
                        $(".listUser").html(str);
                    },
                    error: function (err) {
                        console.log(err);
                    }
                })
            }
        </script>
</body>

</html>